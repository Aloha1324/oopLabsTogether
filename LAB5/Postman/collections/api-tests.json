{
  "info": {
    "_postman_id": "lab5-final-corrected-collection",
    "name": "LAB5 Final Corrected Collection",
    "description": "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å –ø—É—Ç—è–º–∏ /api/v1 –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üè† Health Check (13 —Ç–µ—Å—Ç–æ–≤)",
      "item": [
        {
          "name": "GET –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "console.log('üöÄ –ó–∞–ø—É—Å–∫ Health Check...');"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// –¢–ï–°–¢ 1: –°—Ç–∞—Ç—É—Å –∫–æ–¥",
                  "pm.test('1. –°—Ç–∞—Ç—É—Å 200 OK', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 2: –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞",
                  "pm.test('2. –û—Ç–≤–µ—Ç < 3000ms', function() {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 3: –û—Ç–≤–µ—Ç –Ω–µ –ø—É—Å—Ç–æ–π",
                  "pm.test('3. –û—Ç–≤–µ—Ç –Ω–µ –ø—É—Å—Ç–æ–π', function() {",
                  "    pm.expect(pm.response.text()).to.not.be.empty;",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 4: Content-Type",
                  "pm.test('4. Content-Type –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç', function() {",
                  "    pm.response.to.have.header('Content-Type');",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 5: –î–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞",
                  "pm.test('5. –î–∞—Ç–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö', function() {",
                  "    const date = pm.response.headers.get('Date');",
                  "    if (date) pm.expect(date).to.exist;",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 6: –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞",
                  "pm.test('6. –†–∞–∑–º–µ—Ä > 100 –±–∞–π—Ç', function() {",
                  "    pm.expect(pm.response.responseSize).to.be.above(100);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 7: –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
                  "pm.test('7. HTML –∏–ª–∏ JSON —Ñ–æ—Ä–º–∞—Ç', function() {",
                  "    const ct = pm.response.headers.get('Content-Type') || '';",
                  "    pm.expect(ct).to.include.oneOf(['text/html', 'application/json', 'text/plain']);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 8: –ó–∞–≥–æ–ª–æ–≤–æ–∫ Server",
                  "pm.test('8. –ó–∞–≥–æ–ª–æ–≤–æ–∫ Server', function() {",
                  "    const server = pm.response.headers.get('Server');",
                  "    if (server) pm.expect(server).to.exist;",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 9: Connection",
                  "pm.test('9. Connection –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç', function() {",
                  "    const conn = pm.response.headers.get('Connection');",
                  "    if (conn) pm.expect(conn).to.exist;",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 10: –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏",
                  "pm.test('10. –ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫', function() {",
                  "    pm.expect(pm.response.code).to.not.be.oneOf([0, 502, 503, 504]);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 11: –ö–æ–¥ –æ—Ç–≤–µ—Ç–∞",
                  "pm.test('11. –ö–æ–¥ 200', function() {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 12: –í—Ä–µ–º—è < 5 —Å–µ–∫",
                  "pm.test('12. –û—Ç–≤–µ—Ç < 5000ms', function() {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "// –¢–ï–°–¢ 13: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞",
                  "pm.test('13. Health Check –ø—Ä–æ–π–¥–µ–Ω', function() {",
                  "    pm.expect(true).to.be.true;",
                  "});",
                  "",
                  "console.log('‚úÖ Health Check: ' + pm.response.code + ' (' + pm.response.responseTime + 'ms)');"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{server_url}}/",
              "host": ["{{server_url}}"],
              "path": [""]
            }
          }
        }
      ]
    },
    {
      "name": "üë• Users API - –ù–ê–°–¢–†–û–ô–¢–ï –ö–û–ù–¢–†–û–õ–õ–ï–†",
      "item": [
        {
          "name": "GET –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{server_url}}/api/v1/users",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "users"]
            }
          }
        },
        {
          "name": "GET –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{server_url}}/api/v1/users/{{user_id}}",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "users", "{{user_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "üìà Functions API (–†–ê–ë–û–¢–ê–ï–¢!)",
      "item": [
        {
          "name": "GET –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1. –°—Ç–∞—Ç—É—Å 200 OK', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('2. –§–æ—Ä–º–∞—Ç JSON', function() {",
                  "    pm.response.to.be.json;",
                  "});",
                  "",
                  "pm.test('3. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 1000ms', function() {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const data = pm.response.json();",
                  "    pm.test('4. –ú–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π', function() {",
                  "        pm.expect(data).to.be.an('array').that.is.not.empty;",
                  "    });",
                  "    ",
                  "    pm.test('5. –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É', function() {",
                  "        data.forEach(func => {",
                  "            pm.expect(func).to.include.keys('id', 'name', 'type', 'userId');",
                  "        });",
                  "    });",
                  "}",
                  "",
                  "console.log('üìà Functions: ' + pm.response.code + ' (' + pm.response.responseTime + 'ms)');"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{server_url}}/api/v1/functions",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "functions"]
            }
          }
        },
        {
          "name": "GET –§—É–Ω–∫—Ü–∏—è –ø–æ ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{server_url}}/api/v1/functions/{{function_id}}",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "functions", "{{function_id}}"]
            }
          }
        },
        {
          "name": "POST –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"test_function\",\n  \"type\": \"POLYNOMIAL\",\n  \"userId\": {{user_id}}\n}"
            },
            "url": {
              "raw": "{{server_url}}/api/v1/functions",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "functions"]
            }
          }
        }
      ]
    },
    {
      "name": "üìç Points API - –ù–ê–°–¢–†–û–ô–¢–ï –ö–û–ù–¢–†–û–õ–õ–ï–†",
      "item": [
        {
          "name": "GET –¢–æ—á–∫–∏ –ø–æ Function ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{server_url}}/api/v1/points/function/{{function_id}}",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "points", "function", "{{function_id}}"]
            }
          }
        },
        {
          "name": "POST –°–æ–∑–¥–∞—Ç—å —Ç–æ—á–∫—É",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "{{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"x\": 2.5,\n  \"y\": 6.25,\n  \"functionId\": {{function_id}}\n}"
            },
            "url": {
              "raw": "{{server_url}}/api/v1/points",
              "host": ["{{server_url}}"],
              "path": ["api", "v1", "points"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "console.log('üöÄ ' + pm.info.requestName);"
        ],
        "type": "text/javascript"
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤",
          "const code = pm.response.code;",
          "",
          "pm.test('1. –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω', function() {",
          "    pm.expect(code).to.be.oneOf([200, 201, 204, 400, 401, 403, 404, 500]);",
          "});",
          "",
          "pm.test('2. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 5000ms', function() {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "console.log('üìä –û–±—â–∏–π –∫–æ–¥: ' + code + ', –í—Ä–µ–º—è: ' + pm.response.responseTime + 'ms');"
        ],
        "type": "text/javascript"
      }
    }
  ]
}

