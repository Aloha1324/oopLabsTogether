<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Analyzer - LAB7 | –í—Ö–æ–¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #e2e8f0;
            padding: 10px;
            box-sizing: border-box;
        }

        .container {
            background: rgba(45, 55, 72, 0.95);
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            width: 95%;
            max-width: 900px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .math-icon {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 3rem;
            line-height: 1;
        }

        .math-formula {
            font-family: 'Cambria Math', 'Times New Roman', serif;
            font-size: 2.5rem;
            font-weight: bold;
            color: #f6ad55;
            font-style: italic;
            position: relative;
            top: -0.1em;
        }

        .math-paren {
            font-family: 'Cambria Math', 'Times New Roman', serif;
            font-size: 2.2rem;
            color: #f6ad55;
            font-weight: 300;
            line-height: 1;
        }

        .math-var {
            font-family: 'Cambria Math', 'Times New Roman', serif;
            font-size: 2.5rem;
            font-weight: bold;
            color: #fbbf24;
            font-style: italic;
            margin: 0 0.1em;
        }

        @supports not (font-family: 'Cambria Math') {
            .math-formula, .math-var, .math-paren {
                font-family: 'Times New Roman', serif;
                font-style: italic;
            }
        }

        h1, h2, h3, h4 {
            text-align: center;
            color: #f7fafc;
            margin-bottom: 0.8rem;
        }

        h2 { font-size: 1.4rem; margin-top: 1rem; }

        .form-group {
            margin-bottom: 0.8rem;
        }

        label {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 500;
            color: #e2e8f0;
            font-size: 0.9rem;
        }

        input, select {
            width: 100%;
            padding: 8px 10px;
            border: 2px solid #4a5568;
            border-radius: 6px;
            font-size: 0.9rem;
            background: #4a5568;
            color: #e2e8f0;
            transition: all 0.2s;
        }

        input::placeholder, select {
            color: #a0aec0;
            font-size: 0.9rem;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #f6ad55;
            background: #5a6678;
        }

        .btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);
            color: #2d3748;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 10px rgba(246, 173, 85, 0.4);
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        }

        .btn:active { transform: translateY(0); }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            background: #718096;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .auth-section { display: none; }
        .auth-section.active { display: block; }

        .user-info {
            background: rgba(74, 85, 104, 0.5);
            padding: 0.8rem;
            border-radius: 8px;
            margin: 0.8rem 0;
            border-left: 4px solid #f6ad55;
            font-size: 0.9rem;
        }

        .error, .success {
            padding: 8px;
            border-radius: 6px;
            margin: 0.8rem 0;
            text-align: center;
            font-size: 0.9rem;
        }

        .error {
            background: rgba(245, 101, 101, 0.2);
            border-left: 4px solid #f56565;
        }

        .success {
            background: rgba(72, 187, 120, 0.2);
            border-left: 4px solid #48bb78;
        }

        .loading {
            display: none;
            text-align: center;
            color: #f6ad55;
            font-size: 1rem;
            margin: 0.8rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
            font-size: 0.85rem;
        }

        th, td {
            padding: 6px;
            text-align: center;
            border: 1px solid #4a5568;
        }

        th {
            background: rgba(246, 173, 85, 0.2);
            color: #f6ad55;
        }

        input[type="number"] {
            text-align: center;
        }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
                width: 98%;
                max-width: 100%;
            }

            .math-icon { font-size: 2.5rem; }
            .math-formula { font-size: 2rem; }
            .math-paren, .math-var { font-size: 1.8rem; }

            h1, h2 { font-size: 1.2rem; }
            .form-group { margin-bottom: 0.6rem; }
            label { font-size: 0.85rem; }
            input, select { font-size: 0.85rem; padding: 6px 8px; }
            .btn { font-size: 0.85rem; padding: 8px; }
            .user-info { padding: 0.6rem; font-size: 0.85rem; }
            table { font-size: 0.8rem; }
            th, td { padding: 4px; }
            .grid-2, .grid-3 { gap: 6px; }
        }

        @media (max-width: 480px) {
            .container { padding: 0.8rem; }
            .math-icon { font-size: 2rem; }
            .math-formula { font-size: 1.6rem; }
            .math-paren, .math-var { font-size: 1.6rem; }
            h1, h2 { font-size: 1rem; }
            .form-group { margin-bottom: 0.5rem; }
            label { font-size: 0.8rem; }
            input, select { font-size: 0.8rem; padding: 5px 6px; }
            .btn { font-size: 0.8rem; padding: 6px; }
            .user-info { padding: 0.5rem; font-size: 0.8rem; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; gap: 6px; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="math-icon">
        <span class="math-formula">ùëì</span><span class="math-paren">(</span><span class="math-var">ùë•</span><span class="math-paren">)</span>
    </div>

    <!-- LOGIN -->
    <div id="loginForm" class="auth-section active">
        <h1>–í—Ö–æ–¥</h1>
        <div class="form-group">
            <label>–õ–æ–≥–∏–Ω</label>
            <input type="text" id="loginUsername" placeholder="admin" value="admin">
        </div>
        <div class="form-group">
            <label>–ü–∞—Ä–æ–ª—å</label>
            <input type="password" id="loginPassword" placeholder="admin123" value="admin123">
        </div>
        <button class="btn" onclick="login()">–í–æ–π—Ç–∏</button>
        <p style="text-align: center; margin-top: 0.8rem; color: #a0aec0; font-size: 0.85rem;">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
            <a
                    href="#"
                    onclick="showRegister()"
                    style="color: #f6ad55; text-decoration: none; font-weight: 500;"
                    onmouseover="this.style.color='#ed8936'"
                    onmouseout="this.style.color='#f6ad55'"
            >
                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
            </a>
        </p>
    </div>

    <!-- REGISTER -->
    <div id="registerForm" class="auth-section">
        <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
        <div class="form-group">
            <label>–õ–æ–≥–∏–Ω (–º–∏–Ω. 3 —Å–∏–º–≤–æ–ª–∞)</label>
            <input type="text" id="regUsername" placeholder="–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        </div>
        <div class="form-group">
            <label>–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)</label>
            <input type="password" id="regPassword" placeholder="123456">
        </div>
        <button class="btn" onclick="register()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        <p style="text-align: center; margin-top: 0.8rem; color: #a0aec0; font-size: 0.85rem;">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?
            <a
                    href="#"
                    onclick="showLogin()"
                    style="color: #f6ad55; text-decoration: none; font-weight: 500;"
                    onmouseover="this.style.color='#ed8936'"
                    onmouseout="this.style.color='#f6ad55'"
            >
                –í–æ–π—Ç–∏
            </a>
        </p>
    </div>

    <!-- PROFILE -->
    <div id="userProfile" class="auth-section">
        <div class="success" id="welcomeMsg"></div>
        <div class="user-info">
            <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
            <div>–ò–º—è: <span id="userName">-</span></div>
            <div>–†–æ–ª—å: <span id="userRole">-</span></div>
            <div>ID: <span id="userId">-</span></div>

            <hr style="margin: 0.8rem 0; border-color:#4a5568;">

            <h3>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
            <div class="grid-2">
                <button class="btn" onclick="showFactorySettings()">‚öôÔ∏è –§–∞–±—Ä–∏–∫–∞</button>
                <button class="btn" onclick="showOperations()">‚ûï –û–ø–µ—Ä–∞—Ü–∏–∏</button>
                <button class="btn" onclick="showDifferentiation()">üìà –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                <button class="btn" onclick="showCreateByPoints()">üìä –ü–æ —Ç–æ—á–∫–∞–º</button>
                <button class="btn" onclick="showCreateByFormula()">üßÆ –ü–æ —Ñ–æ—Ä–º—É–ª–µ</button>
            </div>
        </div>
        <button class="btn btn-danger" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
    </div>

    <!-- CREATE BY POINTS -->
    <div id="createByPoints" class="auth-section">
        <h2>üìà –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ —Ç–æ—á–∫–∞–º</h2>
        <div class="form-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏</label>
            <input type="text" id="pointsName" placeholder="–ú–æ—è —Ç–∞–±—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è">
        </div>
        <div class="form-group">
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ (2‚Äì10000)</label>
            <input type="number" min="2" max="10000" id="pointsCount" placeholder="–ù–∞–ø—Ä. 5" oninput="generatePointsTable()">
        </div>
        <div class="form-group">
            <label>–¢–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π</label>
            <div id="pointsTableContainer"></div>
        </div>
        <button class="btn" onclick="createFunctionFromPoints()">‚úÖ –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é</button>
        <button class="btn btn-danger" style="margin-top: 8px;" onclick="showProfile()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- CREATE BY FORMULA -->
    <div id="createByFormula" class="auth-section">
        <h2>üßÆ –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ —Ñ–æ—Ä–º—É–ª–µ</h2>
        <div class="form-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏</label>
            <input type="text" id="formulaName" placeholder="–ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è">
        </div>
        <div class="form-group">
            <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é</label>
            <select id="mathFunctionSelect"></select>
        </div>
        <div class="form-group">
            <label>–ò–Ω—Ç–µ—Ä–≤–∞–ª [–æ—Ç, –¥–æ]</label>
            <input type="number" step="0.1" id="fromX" placeholder="–û—Ç (–Ω–∞–ø—Ä. 0)">
            <input type="number" step="0.1" id="toX" placeholder="–î–æ (–Ω–∞–ø—Ä. 10)" style="margin-top: 6px;">
        </div>
        <div class="form-group">
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ (2‚Äì10000)</label>
            <input type="number" min="2" max="10000" id="formulaPointsCount" value="10">
        </div>
        <button class="btn" onclick="createFunctionFromMath()">‚úÖ –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é</button>
        <button class="btn btn-danger" style="margin-top: 8px;" onclick="showProfile()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- FACTORY SETTINGS -->
    <div id="factorySettings" class="auth-section">
        <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–±—Ä–∏–∫–∏</h2>
        <p>–¢–µ–∫—É—â–∞—è —Ñ–∞–±—Ä–∏–∫–∞: <strong id="currentFactory">–ó–∞–≥—Ä—É–∑–∫–∞...</strong></p>
        <div class="form-group">
            <label><input type="radio" name="factory" value="array"> –ú–∞—Å—Å–∏–≤</label>
            <label><input type="radio" name="factory" value="linked-list"> –°–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫</label>
        </div>
        <button class="btn" onclick="saveFactorySettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn btn-danger" style="margin-top: 8px;" onclick="showProfile()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- OPERATIONS -->
    <div id="operations" class="auth-section">
        <h2>‚ûï –ü–æ—ç–ª–µ–º–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
        <div class="grid-3" style="margin-top:10px;">
            <div>
                <h3>–§—É–Ω–∫—Ü–∏—è A</h3>
                <button class="btn" onclick="loadFunction('A')">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="btn" onclick="createFuncForOp('A', 'points')">üìä –ü–æ —Ç–æ—á–∫–∞–º</button>
                <button class="btn" onclick="createFuncForOp('A', 'formula')">üßÆ –ü–æ —Ñ–æ—Ä–º—É–ª–µ</button>
                <div id="funcATable" class="user-info" style="margin-top:8px; min-height:80px;"></div>
            </div>
            <div>
                <h3>–§—É–Ω–∫—Ü–∏—è B</h3>
                <button class="btn" onclick="loadFunction('B')">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="btn" onclick="createFuncForOp('B', 'points')">üìä –ü–æ —Ç–æ—á–∫–∞–º</button>
                <button class="btn" onclick="createFuncForOp('B', 'formula')">üßÆ –ü–æ —Ñ–æ—Ä–º—É–ª–µ</button>
                <div id="funcBTable" class="user-info" style="margin-top:8px; min-height:80px;"></div>
            </div>
            <div>
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                <div class="grid-2" style="margin-top:8px; gap:4px;">
                    <button class="btn" onclick="performOp('add')">‚ûï</button>
                    <button class="btn" onclick="performOp('sub')">‚ûñ</button>
                    <button class="btn" onclick="performOp('mul')">‚úñÔ∏è</button>
                    <button class="btn" onclick="performOp('div')">‚ûó</button>
                </div>
                <button class="btn" style="margin-top:8px;" onclick="saveResult()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                <div id="resultTable" class="user-info" style="margin-top:8px; min-height:80px;"></div>
            </div>
        </div>
        <button class="btn btn-danger" style="margin-top: 10px;" onclick="showProfile()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- DIFFERENTIATION -->
    <div id="differentiation" class="auth-section">
        <h2>üìà –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <div class="grid-2" style="margin-top:10px; gap:10px;">
            <div>
                <h3>–ò—Å—Ö–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è</h3>
                <button class="btn" onclick="loadFunction('DIFF')">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button class="btn" onclick="createFuncForOp('DIFF', 'points')">üìä –ü–æ —Ç–æ—á–∫–∞–º</button>
                <button class="btn" onclick="createFuncForOp('DIFF', 'formula')">üßÆ –ü–æ —Ñ–æ—Ä–º—É–ª–µ</button>
                <div id="diffInputTable" class="user-info" style="margin-top:8px; min-height:80px;"></div>
            </div>
            <div>
                <h3>–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è</h3>
                <button class="btn" onclick="performDifferentiation()">‚ö° –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn" style="margin-top:8px;" onclick="saveDiffResult()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <div id="diffResultTable" class="user-info" style="margin-top:8px; min-height:80px;"></div>
            </div>
        </div>
        <button class="btn btn-danger" style="margin-top: 10px;" onclick="showProfile()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- LOADER & ERROR -->
    <div id="loading" class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <div id="errorMsg" class="error" style="display: none;"></div>
</div>

<script src="app.js"></script>
</body>
</html>